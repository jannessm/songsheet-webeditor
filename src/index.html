<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Songsheet</title>

    <link rel="stylesheet" href="styles/login.css">
</head>
<body>
    <div id="login">
        <p>Diese Anwendung funktioniert nur mit einem Dropbox-Account, um alle Daten zu speichern und f√ºr andere Verf&uuml;gbar zu machen.</p>
        <input type="button" value="Login" onclick="login()">
    </div>

    <script src="script/dropbox.js"></script>
    <script>
        let dbx = new Dropbox();
        dbx.setClientId("9mjvocts05n4e47");

        if(/access_token/g.test(window.location.href)){
            dbx.setAccessToken(/access_token=(.+?)&/.exec(window.location.href)[1]);
        }
        console.log(dbx.usersGetCurrentAccount());

        function login(){
            window.open(dbx.getAuthenticationUrl('http://localhost/'), '_self');
        }

        //TODO change content if logged in
        //TODO cookies: accesstoken + default_path for app folder (set folder if first login...)
    </script>
</body>
</html>