<!DOCTYPE html>
<html>

<head>
    <!-- for FF, Chrome, Opera -->
    <link rel="icon" type="image/png" href="./asset/icon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="./asset/icon-32x32.png" sizes="32x32">

    <!-- for IE -->
    <link rel="icon" type="image/x-icon" href="/assets/icon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/icon.ico" />

    <title>B.and Songsheet Editor</title>

    <!-- Load Styles -->
    <link rel="stylesheet" type="text/css" href="./styles/style.css">
    <link rel="stylesheet" type="text/css" href="./styles/buttons.css">
    <link rel="stylesheet" type="text/css" href="./styles/wysiwyg.css">
    <link rel="stylesheet" type="text/css" href="./styles/scrollbar.css">
    <link rel="stylesheet" type="text/css" href="./styles/standart-elements.css">

    <!-- Load scripts -->
    <script defer src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
    <script defer src="./script/songsheet.js" type="text/javascript"></script>
    <script defer src="./script/wysiwyg.js" type="text/javascript"></script>
    <script defer type="text/javascript">
        let songJson;

        function generate(toPdf) {
            let drawTable = document.getElementsById("drawLines").checked;
            let songsheetGen = new SongsheetGen();
            let sheet = document.getElementById("editor").value;
            songsheetGen.add_song(sheet, { table: drawTable, annotations: true });
            songJson = songsheetGen.gen(toPdf);
        }

        function preview() {
            let drawTable = document.getElementsById("drawLines").checked;
            let previewRenderer = document.getElementById("previewRenderer");
            generate(false);
            let wysiwyg = new Wysiwyg(drawTable);
            wysiwyg.convert(songJson);
            wysiwyg.show(previewRenderer.innerHTML);
        }
    </script>
</head>

<body>
    <div class="bg-overlay"></div>
    <div class="standard--tab">
        <label>
            <input checked onchange="preview()" id="drawLines" type="checkbox" class="control-element">
             Draw Table
            </label>

        <label>
            Select Font: 
            <select onchange="preview()" class="control-element">
                <option value="font1" selected>Font1</option>
                <option value="font2">Font2</option>
            </select>
            </label>
    </div>
    <!-- Editor Section -->
    <section class="section--editor">
        <textarea onkeypress="preview()" id="editor"></textarea>
    </section>

    <!-- Preview Section -->
    <section class="section--preview">
        <div id="previewRenderer">
            aas</br>
            as</br>
            as</br>
            as</br>
            as</br>as</br>
            as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>
            as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>
            as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>
            as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>
            as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>as</br>

        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-controls">
            <a onclick="generate()" class="button-base footer-button">Download</a>
        </div>
    </footer>
</body>

</html>